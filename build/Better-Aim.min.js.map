{"version":3,"file":"Better-Aim.min.js","sources":["../src/main.ts"],"sourcesContent":["/*\r\nimport * as pegparser from './parser.js';\r\nimport { Parser } from \"pegjs\";\r\nconst parser : Parser = pegparser.default;\r\n\r\n    let test = parser.parse(\"repeat 5 times\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"\\n\" +\r\n    \"in parallel\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\" +\r\n    \"  spawn bullseye with delay 200 at(50,50)\\n\");\r\nconsole.log(test);*/\r\n\r\n\r\nlet UI = {gameDiv: document.getElementById(\"game-div\")};\r\n\r\nlet gameOptions = {\r\n    gameSize: {\r\n        height: 400,\r\n        width: 600\r\n    }\r\n\r\n};\r\n\r\nfunction randomNumber(min, max) {\r\n    return (Math.random() * (max - min)) + min;\r\n}\r\n\r\nclass Target {\r\n\r\n    options: any = {\r\n        position: \"fixed\",\r\n        x: 0,\r\n        y: 0\r\n    };\r\n    size: number = 50;\r\n    delay: number = 0;\r\n    lifeTime: number = 10.0;\r\n    locks: number = 0;\r\n    div;\r\n    isClicked: boolean = false;\r\n    color: string = \"#1759e8\";\r\n    isDead = false;\r\n    startTime = 0;\r\n\r\n    constructor(props) {\r\n        this.options = props.options;\r\n        this.size = props.size;\r\n        this.delay = props.delay;\r\n        this.lifeTime = props.lifeTime;\r\n        this.locks = props.locks;\r\n    }\r\n\r\n    public create() {\r\n        this.startTime = 0; //datetime now\r\n        this.div = document.createElement(\"div\");\r\n        this.div.classList.add(\"target\");\r\n        this.div.style.height = this.size + \"px\";\r\n        this.div.style.width = this.size + \"px\";\r\n        this.div.addEventListener('mousedown', () => this.clicked());\r\n        if (this.options.position == \"fixed\") {\r\n            this.div.style.position = \"absolute\";\r\n            this.div.style.top = this.options.y + \"px\";\r\n            this.div.style.left = this.options.x + \"px\";\r\n        }\r\n        if (this.options.position == \"random\") {\r\n            this.div.style.position = \"absolute\";\r\n            this.div.style.top = randomNumber(parseInt(this.options.y), parseInt(this.options.y2)) + \"px\";\r\n            this.div.style.left = randomNumber(parseInt(this.options.x), parseInt(this.options.x2)) + \"px\";\r\n        }\r\n\r\n        if (this.locks > 0)\r\n            this.div.style.backgroundColor = \"gray\";\r\n\r\n        this.div.style.zIndex = 10000 - this.locks;\r\n\r\n        let div = this.div;\r\n        setTimeout(function () {\r\n            UI.gameDiv.append(div);\r\n        }, this.delay * 1000);\r\n\r\n        setTimeout((() => {\r\n            this.kill();\r\n        }), (this.delay + this.lifeTime) * 1000)\r\n    }\r\n\r\n    public kill(div = this.div) {\r\n        this.isDead = true;\r\n        div.style.animation = 'explode 70ms forwards';\r\n        setTimeout(function () {\r\n            UI.gameDiv.removeChild(div);\r\n        }, 70);\r\n    }\r\n\r\n    public updateLock() {\r\n        if (this.locks > 0) {\r\n            this.locks--;\r\n            if (this.locks == 0)\r\n                this.div.style.backgroundColor = this.color;\r\n        }\r\n    };\r\n\r\n    public clicked() {\r\n        if (this.isClicked || this.locks > 0)\r\n            return;\r\n        updateTargetLocks();\r\n        this.kill();\r\n        this.isClicked = true;\r\n    }\r\n\r\n}\r\n\r\nfunction initializeGame() {\r\n    UI.gameDiv.style.height = String(gameOptions.gameSize.height + \"px\");\r\n    UI.gameDiv.style.width = String(gameOptions.gameSize.width + \"px\");\r\n}\r\n\r\ninitializeGame();\r\n\r\nlet targetList = [\r\n    new Target({\r\n        options: {\r\n            position: \"fixed\",\r\n            x: 50,\r\n            y: 50\r\n        },\r\n        size: 50,\r\n        delay: 0,\r\n        lifeTIme: 3,\r\n        locks: 0,\r\n        lifeTime: 10\r\n    }),\r\n    new Target({\r\n        options: {position: \"fixed\", x: 0, x2: 550, y: 0, y2: 350},\r\n        size: 50,\r\n        delay: 0,\r\n        locks: 1,\r\n        lifeTime: 10\r\n    }),\r\n    new Target({\r\n        options: {position: \"random\", x: 0, x2: 550, y: 0, y2: 350},\r\n        size: 50,\r\n        delay: 0,\r\n        locks: 2,\r\n        lifeTime: 10\r\n    }),\r\n    new Target({\r\n        options: {position: \"random\", x: 0, x2: 550, y: 0, y2: 350},\r\n        size: 50,\r\n        delay: 0,\r\n        locks: 3,\r\n        lifeTime: 10\r\n    }),\r\n    new Target({\r\n        options: {position: \"random\", x: 0, x2: 550, y: 0, y2: 350},\r\n        size: 50,\r\n        delay: 0,\r\n        locks: 4,\r\n        lifeTime: 10\r\n    }),\r\n    new Target({\r\n        options: {position: \"random\", x: 0, x2: 550, y: 0, y2: 350},\r\n        size: 50,\r\n        delay: 0,\r\n        locks: 5,\r\n        lifeTime: 10\r\n    })\r\n];\r\n\r\nclass Game {\r\n    targetList: any;\r\n\r\n    constructor(inputTargetList) {\r\n        targetList = inputTargetList;\r\n    }\r\n\r\n    aliveTargetExists(targetList) {\r\n        for (let i = 0; i < targetList.length; i++) {\r\n            if (!targetList[i].isDead)\r\n                return true\r\n        }\r\n        return false\r\n    }\r\n\r\n    updateTargetLocks(targetList) {\r\n        for (let i = 0; i < targetList.length; i++) {\r\n            targetList[i].updateLock();\r\n        }\r\n        targetList\r\n    }\r\n\r\n    startGame(targetList) {\r\n        for (let i = 0; i < targetList.length; i++) {\r\n            targetList[i].create();\r\n        }\r\n    }\r\n}\r\n\r\nfunction aliveTargetExists(targetList) {\r\n    for (let i = 0; i < targetList.length; i++) {\r\n        if (!targetList[i].isDead)\r\n            return true\r\n    }\r\n    return false\r\n}\r\n\r\nfunction updateTargetLocks() {\r\n    for (let i = 0; i < targetList.length; i++) {\r\n        targetList[i].updateLock();\r\n    }\r\n}\r\n\r\nfunction startGame() {\r\n    for (let i = 0; i < targetList.length; i++) {\r\n        targetList[i].create();\r\n    }\r\n}\r\n\r\nstartGame();\r\n\r\nfunction sequenceParser(nodeArray) {\r\n    let targetArray = [];\r\n    for (let i = 0; i < nodeArray.amount; i++)\r\n        targetArray.concat(nodeParser(nodeArray[i]));\r\n    return targetArray;\r\n}\r\n\r\nfunction nodeParser(node) {\r\n    switch (node.type) {\r\n        case \"target\":\r\n            return [new Target(node.props)];\r\n        case \"repeat\":\r\n            console.log(\"repeat\");\r\n            let array = [];\r\n            for (let i = 0; i < node.amount; i++)\r\n                array.push(new Target(node.children[i]));\r\n            return array;\r\n        default:\r\n            return [{}];\r\n    }\r\n}\r\n\r\n"],"names":["UI","gameDiv","document","getElementById","gameOptions","gameSize","height","width","randomNumber","min","max","Math","random","props","this","position","x","y","options","size","delay","lifeTime","locks","Target","startTime","div","createElement","classList","add","style","addEventListener","_this","clicked","top","left","parseInt","y2","x2","backgroundColor","zIndex","setTimeout","append","kill","isDead","animation","removeChild","color","isClicked","i","targetList","length","updateLock","updateTargetLocks","String","lifeTIme","create","startGame"],"mappings":"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"}